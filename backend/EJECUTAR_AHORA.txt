================================================================================
ğŸ¯ COMANDOS PARA EJECUTAR AHORA
================================================================================

PASO 1: MIGRAR LA BASE DE DATOS (IMPORTANTE - SOLO UNA VEZ)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cd backend
python add_business_id_migration.py

Este comando agregarÃ¡ el campo business_id a las tablas:
  âœ… tables
  âœ… orders
  âœ… products
  âœ… categories
  âœ… menu_items
  âœ… menu_categories

âš ï¸  IMPORTANTE: Haz un backup de tu base de datos antes si tienes datos importantes!


PASO 2: INICIAR EL SERVIDOR
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
python run_nest.py

O alternativamente:
uvicorn app_nest:app --reload --host 0.0.0.0 --port 8000


PASO 3: ABRIR DOCUMENTACIÃ“N
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Abre en tu navegador:
http://localhost:8000/docs


PASO 4: PROBAR LOS ENDPOINTS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Prueba estos endpoints con prefijo /api:

âœ… POST /api/auth/login
âœ… GET  /api/products
âœ… GET  /api/customers
âœ… GET  /api/tables
âœ… GET  /api/users/me
âœ… GET  /api/profile/my-permissions


================================================================================
ğŸ“‹ MÃ“DULOS MIGRADOS A PYNEST
================================================================================

Estos mÃ³dulos YA estÃ¡n funcionando con PyNest y filtran por business_id:

âœ… /api/auth/*         - AutenticaciÃ³n
âœ… /api/products/*     - Productos (filtrado por negocio)
âœ… /api/customers/*    - Clientes (filtrado por negocio)
âœ… /api/users/*        - Usuarios (filtrado por negocio)
âœ… /api/tables/*       - Mesas (filtrado por negocio)
âœ… /api/profile/*      - Perfil

Estos mÃ³dulos estÃ¡n usando routers legacy temporalmente:

ğŸ”„ /api/orders/*
ğŸ”„ /api/menu/*
ğŸ”„ /api/configuration/*
ğŸ”„ /api/payment-methods/*
ğŸ”„ Y otros...


================================================================================
ğŸ”’ MULTI-TENANCY IMPLEMENTADO
================================================================================

Ahora cada negocio SOLO ve sus propios datos:

  Negocio A â†’ Solo ve mesas, productos, clientes del Negocio A
  Negocio B â†’ Solo ve mesas, productos, clientes del Negocio B

Esto se logrÃ³ agregando business_id a los modelos y filtrando en los servicios.


================================================================================
âš ï¸  MUY IMPORTANTE
================================================================================

ANTES de iniciar el servidor, DEBES ejecutar la migraciÃ³n:

1. python add_business_id_migration.py

Sin esto, el servidor NO funcionarÃ¡ correctamente porque los modelos
esperan el campo business_id pero la base de datos no lo tiene.


================================================================================
ğŸ“ Â¿PROBLEMAS?
================================================================================

Error: "business_id does not exist"
â†’ Ejecuta: python add_business_id_migration.py

Error: "No module named 'nest'"
â†’ Ejecuta: pip install -r requirements.txt

Error: "No se pueden crear productos/mesas"
â†’ Verifica que ejecutaste la migraciÃ³n de BD

Rutas con icono rojo (X)
â†’ Esos mÃ³dulos estÃ¡n usando routers legacy, necesitan migraciÃ³n


================================================================================
âœ¨ Â¡LISTO!
================================================================================

Tu aplicaciÃ³n ahora tiene:
  âœ… Arquitectura modular con PyNest
  âœ… Multi-tenancy por business_id
  âœ… InyecciÃ³n de dependencias automÃ¡tica
  âœ… Datos aislados por negocio
  âœ… 6 mÃ³dulos completamente migrados

Para mÃ¡s informaciÃ³n, lee:
  ğŸ“– LEEME_PRIMERO.md
  ğŸ“– RESUMEN_CAMBIOS.md
  ğŸ“– INSTRUCCIONES_MULTI_TENANCY.md


================================================================================
ğŸš€ COMANDO RÃPIDO
================================================================================

# Todo en uno:
python add_business_id_migration.py && python run_nest.py


Fecha: 2025
VersiÃ³n: 2.0.0
Framework: PyNest + FastAPI
Multi-Tenancy: Habilitado

